{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\src\\\\views\\\\ApproveRequest.js\";\nimport React, { Component } from 'react';\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport '../index.css';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport { Spinner } from 'react-bootstrap'; // reactstrap components\n\nimport { Button, ButtonGroup, Card, CardHeader, CardBody, CardTitle, DropdownToggle, DropdownMenu, DropdownItem, UncontrolledDropdown, Label, FormGroup, Input, Table, Row, Col, UncontrolledTooltip } from \"reactstrap\";\nimport { LoadingContainer, AccountData, ContractData, ContractForm } from '@drizzle/react-components';\nvar drizzleOptions = {\n  contracts: [Land]\n};\nvar requestTable = [];\n\nvar ApproveRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ApproveRequest, _Component);\n\n  function ApproveRequest(props) {\n    var _this;\n\n    _classCallCheck(this, ApproveRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ApproveRequest).call(this, props));\n\n    _this.approveRequest = function (reqId) {\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _this.state.LandInstance.methods.approveRequest(reqId).send({\n                    from: _this.state.account,\n                    gas: 2100000\n                  });\n\n                case 2:\n                  //Reload\n                  window.location.reload(false);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))\n      );\n    };\n\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var web3, accounts, networkId, deployedNetwork, instance, currentAddress, registered, requestsCount, i, request, approved;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              //For refreshing page only once\n              if (!window.location.hash) {\n                window.location = window.location + '#loaded';\n                window.location.reload();\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return getWeb3();\n\n            case 4:\n              web3 = _context2.sent;\n              _context2.next = 7;\n              return web3.eth.getAccounts();\n\n            case 7:\n              accounts = _context2.sent;\n              _context2.next = 10;\n              return web3.eth.net.getId();\n\n            case 10:\n              networkId = _context2.sent;\n              deployedNetwork = Land.networks[networkId];\n              instance = new web3.eth.Contract(Land.abi, deployedNetwork && deployedNetwork.address);\n\n              _this.setState({\n                LandInstance: instance,\n                web3: web3,\n                account: accounts[0]\n              });\n\n              _context2.next = 16;\n              return web3.currentProvider.selectedAddress;\n\n            case 16:\n              currentAddress = _context2.sent;\n              console.log(currentAddress);\n              _context2.next = 20;\n              return _this.state.LandInstance.methods.isSeller(currentAddress).call();\n\n            case 20:\n              registered = _context2.sent;\n              console.log(registered);\n\n              _this.setState({\n                registered: registered\n              });\n\n              _context2.next = 25;\n              return _this.state.LandInstance.methods.getRequestsCount().call();\n\n            case 25:\n              requestsCount = _context2.sent;\n              console.log(requestsCount);\n              i = 1;\n\n            case 28:\n              if (!(i < requestsCount + 1)) {\n                _context2.next = 40;\n                break;\n              }\n\n              _context2.next = 31;\n              return _this.state.LandInstance.methods.getRequestDetails(i).call();\n\n            case 31:\n              request = _context2.sent;\n              _context2.next = 34;\n              return _this.state.LandInstance.methods.isApproved(i).call();\n\n            case 34:\n              approved = _context2.sent;\n              console.log(approved);\n\n              if (currentAddress == request[0].toLowerCase()) {\n                requestTable.push(React.createElement(\"tr\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101\n                  },\n                  __self: this\n                }, React.createElement(\"td\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101\n                  },\n                  __self: this\n                }, i), React.createElement(\"td\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101\n                  },\n                  __self: this\n                }, request[1]), React.createElement(\"td\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101\n                  },\n                  __self: this\n                }, request[2]), React.createElement(\"td\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 101\n                  },\n                  __self: this\n                }, request[3].toString()), React.createElement(\"td\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 102\n                  },\n                  __self: this\n                }, React.createElement(Button, {\n                  onClick: _this.approveRequest(i),\n                  disabled: approved,\n                  className: \"button-vote\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 103\n                  },\n                  __self: this\n                }, \"Approve Request\"))));\n              } // console.log(request[1]);\n\n\n            case 37:\n              i++;\n              _context2.next = 28;\n              break;\n\n            case 40:\n              _context2.next = 46;\n              break;\n\n            case 42:\n              _context2.prev = 42;\n              _context2.t0 = _context2[\"catch\"](1);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context2.t0);\n\n            case 46:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[1, 42]]);\n    }));\n    _this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      registered: '',\n      approved: ''\n    };\n    return _this;\n  }\n\n  _createClass(ApproveRequest, [{\n    key: \"render\",\n    value: function render() {\n      if (!this.state.web3) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(Spinner, {\n          animation: \"border\",\n          variant: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }))));\n      }\n\n      if (!this.state.registered) {\n        return React.createElement(\"div\", {\n          className: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"You are not authorized to view this page.\")));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(DrizzleProvider, {\n        options: drizzleOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(LoadingContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        tag: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Requests Info\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"tablesorter\",\n        responsive: true,\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"text-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Buyer ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Land ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Request Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Approve Request\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, requestTable)))))));\n    }\n  }]);\n\n  return ApproveRequest;\n}(Component);\n\nexport default ApproveRequest;","map":{"version":3,"sources":["C:\\Users\\prith\\Desktop\\New folder (5)\\starter_kit-master\\LandRegisteration\\src\\views\\ApproveRequest.js"],"names":["React","Component","Land","getWeb3","DrizzleProvider","Spinner","Button","ButtonGroup","Card","CardHeader","CardBody","CardTitle","DropdownToggle","DropdownMenu","DropdownItem","UncontrolledDropdown","Label","FormGroup","Input","Table","Row","Col","UncontrolledTooltip","LoadingContainer","AccountData","ContractData","ContractForm","drizzleOptions","contracts","requestTable","ApproveRequest","props","approveRequest","reqId","state","LandInstance","methods","send","from","account","gas","window","location","reload","componentDidMount","hash","web3","eth","getAccounts","accounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","setState","currentProvider","selectedAddress","currentAddress","console","log","isSeller","call","registered","getRequestsCount","requestsCount","i","getRequestDetails","request","isApproved","approved","toLowerCase","push","toString","alert","error","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Land from \"../artifacts/Land.json\"\nimport getWeb3 from \"../getWeb3\"\nimport '../index.css';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport {  Spinner } from 'react-bootstrap'\n// reactstrap components\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    CardHeader,\n    CardBody,\n    CardTitle,\n    DropdownToggle,\n    DropdownMenu,\n    DropdownItem,\n    UncontrolledDropdown,\n    Label,\n    FormGroup,\n    Input,\n    Table,\n    Row,\n    Col,\n    UncontrolledTooltip,\n  } from \"reactstrap\";\nimport {\n    LoadingContainer,\n    AccountData,\n    ContractData,\n    ContractForm\n} from '@drizzle/react-components'\n\nconst drizzleOptions = {\n    contracts: [Land]\n}\n\nvar requestTable = [];\n\nclass ApproveRequest extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            LandInstance: undefined,\n            account: null,\n            web3: null,\n            registered: '',\n            approved: '',\n        }\n    }\n    approveRequest = (reqId) => async () => {\n\n        await this.state.LandInstance.methods.approveRequest(\n            reqId\n        ).send({\n            from: this.state.account,\n            gas: 2100000\n        });\n        //Reload\n        window.location.reload(false);\n\n    }\n\n    componentDidMount = async () => {\n        //For refreshing page only once\n        if (!window.location.hash) {\n            window.location = window.location + '#loaded';\n            window.location.reload();\n        }\n\n        try {\n            //Get network provider and web3 instance\n            const web3 = await getWeb3();\n\n            const accounts = await web3.eth.getAccounts();\n\n            const networkId = await web3.eth.net.getId();\n            const deployedNetwork = Land.networks[networkId];\n            const instance = new web3.eth.Contract(\n                Land.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n\n            this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\n\n            const currentAddress = await web3.currentProvider.selectedAddress;\n            console.log(currentAddress);\n            var registered = await this.state.LandInstance.methods.isSeller(currentAddress).call();\n            console.log(registered);\n            this.setState({ registered: registered });\n            var requestsCount = await this.state.LandInstance.methods.getRequestsCount().call();\n            console.log(requestsCount);\n            \n            for (let i = 1; i < requestsCount + 1; i++) {\n                var request = await this.state.LandInstance.methods.getRequestDetails(i).call();\n                var approved = await this.state.LandInstance.methods.isApproved(i).call();\n                console.log(approved);\n                if (currentAddress == request[0].toLowerCase()) {\n                    requestTable.push(<tr><td>{i}</td><td>{request[1]}</td><td>{request[2]}</td><td>{request[3].toString()}</td>\n                        <td>\n                            <Button onClick={this.approveRequest(i)} disabled={approved} className=\"button-vote\">\n                                Approve Request\n                    </Button>\n                        </td></tr>)\n                }\n                // console.log(request[1]);\n            }\n            // console.log(requestTable);\n\n        } catch (error) {\n            // Catch any errors for any of the above operations.\n            alert(\n                `Failed to load web3, accounts, or contract. Check console for details.`,\n            );\n            console.error(error);\n        }\n    };\n\n    render() {\n        if (!this.state.web3) {\n            return (\n                <div>\n                    <div>\n                        <h1>\n                            <Spinner animation=\"border\" variant=\"primary\" />\n                        </h1>\n                    </div>\n\n                </div>\n            );\n        }\n\n        if (!this.state.registered) {\n            return (\n                <div className=\"content\">\n                    <div>\n                        <h1>\n                            You are not authorized to view this page.\n                  </h1>\n                    </div>\n\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"content\">\n                <DrizzleProvider options={drizzleOptions}>\n                    <LoadingContainer>\n                        <Card>\n                            <CardHeader>\n                                <CardTitle tag=\"h4\">Requests Info</CardTitle>\n                            </CardHeader>\n                            <CardBody>\n\n                                <Table className=\"tablesorter\" responsive color=\"black\">\n                                    <thead className=\"text-primary\">\n                                        <tr>\n                                            <th>#</th>\n                                            <th>Buyer ID</th>\n                                            <th>Land ID</th>\n                                            <th>Request Status</th>\n                                            <th>Approve Request</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {requestTable}\n                                    </tbody>\n                                </Table>\n                            </CardBody>\n                        </Card>\n\n                    </LoadingContainer>\n                </DrizzleProvider>\n            </div>\n        );\n\n    }\n}\n\nexport default ApproveRequest;\n"]},"metadata":{},"sourceType":"module"}