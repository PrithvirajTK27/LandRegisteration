{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\src\\\\views\\\\BuyerInfo.js\";\nimport React, { Component } from 'react';\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport '../index.css';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport { Spinner } from 'react-bootstrap';\nimport { LoadingContainer, AccountData, ContractData, ContractForm } from '@drizzle/react-components'; // reactstrap components\n\nimport { Button, ButtonGroup, Card, CardHeader, CardBody, CardTitle, DropdownToggle, DropdownMenu, DropdownItem, UncontrolledDropdown, Label, FormGroup, Input, Table, Row, Col, UncontrolledTooltip } from \"reactstrap\";\nimport { emailjs } from 'emailjs-com';\nvar drizzleOptions = {\n  contracts: [Land] // var buyers = 0;\n  // var sellers = 0;\n\n};\nvar buyerTable = [];\nvar completed = true;\n\nfunction sendMail(email, name) {\n  // alert(typeof(name));\n  var tempParams = {\n    from_name: email,\n    to_name: name,\n    function: 'request and buy any land/property'\n  };\n  window.emailjs.send('service_vrxa1ak', 'template_zhc8m9h', tempParams).then(function (res) {\n    alert(\"Mail sent successfully\");\n  });\n}\n\nvar BuyerInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BuyerInfo, _Component);\n\n  function BuyerInfo(props) {\n    var _this;\n\n    _classCallCheck(this, BuyerInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BuyerInfo).call(this, props));\n\n    _this.verifyBuyer = function (item) {\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _this.state.LandInstance.methods.verifyBuyer(item).send({\n                    from: _this.state.account,\n                    gas: 2100000\n                  });\n\n                case 2:\n                  //Reload\n                  window.location.reload(false);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))\n      );\n    };\n\n    _this.NotverifyBuyer = function (item, email, name) {\n      return (\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  // alert('Before mail');\n                  sendMail(email, name); // alert('After mail');\n\n                  _context2.next = 3;\n                  return new Promise(function (resolve) {\n                    return setTimeout(resolve, 10000);\n                  });\n\n                case 3:\n                  _context2.next = 5;\n                  return _this.state.LandInstance.methods.rejectBuyer(item).send({\n                    from: _this.state.account,\n                    gas: 2100000\n                  });\n\n                case 5:\n                  window.location.reload(false);\n\n                case 6:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }))\n      );\n    };\n\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var web3, accounts, currentAddress, networkId, deployedNetwork, instance, buyersCount, buyersMap, verified, i, buyer, buyer_verify, not_verify;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              //For refreshing page only once\n              if (!window.location.hash) {\n                window.location = window.location + '#loaded';\n                window.location.reload();\n              }\n\n              _context3.prev = 1;\n              _context3.next = 4;\n              return getWeb3();\n\n            case 4:\n              web3 = _context3.sent;\n              _context3.next = 7;\n              return web3.eth.getAccounts();\n\n            case 7:\n              accounts = _context3.sent;\n              _context3.next = 10;\n              return web3.currentProvider.selectedAddress;\n\n            case 10:\n              currentAddress = _context3.sent;\n              _context3.next = 13;\n              return web3.eth.net.getId();\n\n            case 13:\n              networkId = _context3.sent;\n              deployedNetwork = Land.networks[networkId];\n              instance = new web3.eth.Contract(Land.abi, deployedNetwork && deployedNetwork.address);\n\n              _this.setState({\n                LandInstance: instance,\n                web3: web3,\n                account: accounts[0]\n              });\n\n              _context3.next = 19;\n              return _this.state.LandInstance.methods.getBuyersCount().call();\n\n            case 19:\n              buyersCount = _context3.sent;\n              console.log(buyersCount);\n              buyersMap = [];\n              _context3.next = 24;\n              return _this.state.LandInstance.methods.getBuyer().call();\n\n            case 24:\n              buyersMap = _context3.sent;\n              _context3.next = 27;\n              return _this.state.LandInstance.methods.isLandInspector(currentAddress).call();\n\n            case 27:\n              verified = _context3.sent;\n\n              //console.log(verified);\n              _this.setState({\n                verified: verified\n              });\n\n              i = 0;\n\n            case 30:\n              if (!(i < buyersCount)) {\n                _context3.next = 47;\n                break;\n              }\n\n              _context3.next = 33;\n              return _this.state.LandInstance.methods.getBuyerDetails(buyersMap[i]).call();\n\n            case 33:\n              buyer = _context3.sent;\n              _context3.next = 36;\n              return _this.state.LandInstance.methods.isVerified(buyersMap[i]).call();\n\n            case 36:\n              buyer_verify = _context3.sent;\n              console.log(buyer_verify);\n              buyer.verified = buyer_verify;\n              _context3.next = 41;\n              return _this.state.LandInstance.methods.isRejected(buyersMap[i]).call();\n\n            case 41:\n              not_verify = _context3.sent;\n              console.log(not_verify);\n              buyerTable.push(React.createElement(\"tr\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, i + 1), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyersMap[i]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[0]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[5]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[4]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[1]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[6]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, buyer[2]), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, React.createElement(\"a\", {\n                href: \"https://ipfs.io/ipfs/\".concat(buyer[3]),\n                target: \"_blank\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 156\n                },\n                __self: this\n              }, \"Click Here\")), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 157\n                },\n                __self: this\n              }, buyer.verified.toString()), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 158\n                },\n                __self: this\n              }, React.createElement(Button, {\n                onClick: _this.verifyBuyer(buyersMap[i]),\n                disabled: buyer_verify || not_verify,\n                className: \"button-vote\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 159\n                },\n                __self: this\n              }, \"Verify\")), React.createElement(\"td\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 163\n                },\n                __self: this\n              }, React.createElement(Button, {\n                onClick: _this.NotverifyBuyer(buyersMap[i], buyer[4], buyer[0]),\n                disabled: buyer_verify || not_verify,\n                className: \"btn btn-danger\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 164\n                },\n                __self: this\n              }, \"Reject\"))));\n\n            case 44:\n              i++;\n              _context3.next = 30;\n              break;\n\n            case 47:\n              _context3.next = 53;\n              break;\n\n            case 49:\n              _context3.prev = 49;\n              _context3.t0 = _context3[\"catch\"](1);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context3.t0);\n\n            case 53:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[1, 49]]);\n    }));\n    _this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      buyers: 0,\n      verified: ''\n    };\n    return _this;\n  }\n\n  _createClass(BuyerInfo, [{\n    key: \"render\",\n    value: function render() {\n      if (!this.state.web3) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, React.createElement(Spinner, {\n          animation: \"border\",\n          variant: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }))));\n      }\n\n      if (!this.state.verified) {\n        return React.createElement(\"div\", {\n          className: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, React.createElement(Col, {\n          xs: \"6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"card-chart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(CardBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, \"You are not verified to view this page\")))))));\n      }\n\n      return React.createElement(DrizzleProvider, {\n        options: drizzleOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(LoadingContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        tag: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Buyers Info\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"tablesorter\",\n        responsive: true,\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"text-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Account Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Age\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"City\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Aadhar Number\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"Pan Number\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Aadhar Card Document\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Verification Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Verify Buyer\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Reject Buyer\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, buyerTable)))))))));\n    }\n  }]);\n\n  return BuyerInfo;\n}(Component);\n\nexport default BuyerInfo;","map":{"version":3,"sources":["C:\\Users\\prith\\Desktop\\New folder (5)\\starter_kit-master\\LandRegisteration\\src\\views\\BuyerInfo.js"],"names":["React","Component","Land","getWeb3","Line","Bar","DrizzleProvider","Spinner","LoadingContainer","AccountData","ContractData","ContractForm","Button","ButtonGroup","Card","CardHeader","CardBody","CardTitle","DropdownToggle","DropdownMenu","DropdownItem","UncontrolledDropdown","Label","FormGroup","Input","Table","Row","Col","UncontrolledTooltip","emailjs","drizzleOptions","contracts","buyerTable","completed","sendMail","email","name","tempParams","from_name","to_name","function","window","send","then","res","alert","BuyerInfo","props","verifyBuyer","item","state","LandInstance","methods","from","account","gas","location","reload","NotverifyBuyer","Promise","resolve","setTimeout","rejectBuyer","componentDidMount","hash","web3","eth","getAccounts","accounts","currentProvider","selectedAddress","currentAddress","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","setState","getBuyersCount","call","buyersCount","console","log","buyersMap","getBuyer","isLandInspector","verified","i","getBuyerDetails","buyer","isVerified","buyer_verify","isRejected","not_verify","push","toString","error","undefined","buyers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport '../index.css';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport { Spinner } from 'react-bootstrap'\nimport {\n    LoadingContainer,\n    AccountData,\n    ContractData,\n    ContractForm\n} from '@drizzle/react-components'\n\n// reactstrap components\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    CardHeader,\n    CardBody,\n    CardTitle,\n    DropdownToggle,\n    DropdownMenu,\n    DropdownItem,\n    UncontrolledDropdown,\n    Label,\n    FormGroup,\n    Input,\n    Table,\n    Row,\n    Col,\n    UncontrolledTooltip,\n} from \"reactstrap\";\n\nimport { emailjs } from 'emailjs-com';\nconst drizzleOptions = {\n    contracts: [Land]\n}\n\n// var buyers = 0;\n// var sellers = 0;\nvar buyerTable = [];\nvar completed = true;\n\nfunction sendMail(email, name){\n    // alert(typeof(name));\n\n    var tempParams = {\n        from_name: email,\n        to_name: name,\n        function: 'request and buy any land/property',\n    };\n    \n    window.emailjs.send('service_vrxa1ak', 'template_zhc8m9h', tempParams)\n    .then(function(res){\n        alert(\"Mail sent successfully\");\n    })\n}\n\nclass BuyerInfo extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            LandInstance: undefined,\n            account: null,\n            web3: null,\n            buyers: 0,\n            verified: '',\n        }\n    }\n\n  \n    verifyBuyer = (item) => async () => {\n        //console.log(\"Hello\");\n        //console.log(item);\n\n        await this.state.LandInstance.methods.verifyBuyer(\n            item\n        ).send({\n            from: this.state.account,\n            gas: 2100000\n        });\n\n        //Reload\n        window.location.reload(false);\n\n    }\n    \n    NotverifyBuyer = (item, email, name) => async() => {\n        // alert('Before mail');\n        sendMail(email, name);\n        // alert('After mail');\n\n        await new Promise(resolve => setTimeout(resolve, 10000));\n\n        await this.state.LandInstance.methods.rejectBuyer(\n            item\n        ).send({\n            from: this.state.account,\n            gas: 2100000\n        });\n\n        window.location.reload(false);\n    }\n\n    componentDidMount = async () => {\n        //For refreshing page only once\n        if (!window.location.hash) {\n            window.location = window.location + '#loaded';\n            window.location.reload();\n        }\n\n        try {\n            //Get network provider and web3 instance\n            const web3 = await getWeb3();\n\n            const accounts = await web3.eth.getAccounts();\n\n            const currentAddress = await web3.currentProvider.selectedAddress;\n            //console.log(currentAddress);\n            const networkId = await web3.eth.net.getId();\n            const deployedNetwork = Land.networks[networkId];\n            const instance = new web3.eth.Contract(\n                Land.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n\n            this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\n\n\n            var buyersCount = await this.state.LandInstance.methods.getBuyersCount().call();\n            console.log(buyersCount);\n           \n\n            var buyersMap = [];\n            buyersMap = await this.state.LandInstance.methods.getBuyer().call();\n            //console.log(buyersMap);\n\n            var verified = await this.state.LandInstance.methods.isLandInspector(currentAddress).call();\n            //console.log(verified);\n            this.setState({ verified: verified });\n\n            for (let i = 0; i < buyersCount; i++) {\n                // var i =3;\n                var buyer = await this.state.LandInstance.methods.getBuyerDetails(buyersMap[i]).call();\n\n                var buyer_verify = await this.state.LandInstance.methods.isVerified(buyersMap[i]).call();\n                console.log(buyer_verify);\n                buyer.verified = buyer_verify;\n                \n                var not_verify = await this.state.LandInstance.methods.isRejected(buyersMap[i]).call();\n                console.log(not_verify);\n                buyerTable.push(<tr><td>{i + 1}</td><td>{buyersMap[i]}</td><td>{buyer[0]}</td><td>{buyer[5]}</td><td>{buyer[4]}</td><td>{buyer[1]}</td><td>{buyer[6]}</td><td>{buyer[2]}</td><td><a href={`https://ipfs.io/ipfs/${buyer[3]}`} target=\"_blank\">Click Here</a></td>\n                    <td>{buyer.verified.toString()}</td>\n                    <td>\n                        <Button onClick={this.verifyBuyer(buyersMap[i])} disabled={buyer_verify || not_verify} className=\"button-vote\">\n                            Verify\n                    </Button>\n                    </td>\n                    <td>\n                        <Button onClick={this.NotverifyBuyer(buyersMap[i], buyer[4], buyer[0])} disabled={buyer_verify || not_verify} className=\"btn btn-danger\">\n                           Reject\n                    </Button>\n                    </td>\n                </tr>)\n\n            }\n\n        } catch (error) {\n            // Catch any errors for any of the above operations.\n            alert(\n                `Failed to load web3, accounts, or contract. Check console for details.`,\n            );\n            console.error(error);\n        }\n    };\n\n\n\n    render() {\n        if (!this.state.web3) {\n            return (\n                <div>\n                    <div>\n                        <h1>\n                            <Spinner animation=\"border\" variant=\"primary\" />\n                        </h1>\n                    </div>\n\n                </div>\n            );\n        }\n\n        if (!this.state.verified) {\n            return (\n                <div className=\"content\">\n                    <div>\n                        <Row>\n                            <Col xs=\"6\">\n                                <Card className=\"card-chart\">\n                                    <CardBody>\n                                        <h1>\n                                            You are not verified to view this page\n                                        </h1>\n                                    </CardBody>\n                                </Card>\n                            </Col>\n                        </Row>\n                    </div>\n\n                </div>\n            );\n        }\n\n        return (\n            <DrizzleProvider options={drizzleOptions}>\n                <LoadingContainer>\n                    <div className=\"content\">\n                        <Row>\n                            <Col xs=\"12\">\n                                <Card>\n                                    <CardHeader>\n                                        <CardTitle tag=\"h5\">Buyers Info</CardTitle>\n                                    </CardHeader>\n                                    <CardBody>\n                                        <Table className=\"tablesorter\" responsive color=\"black\">\n                                            <thead className=\"text-primary\">\n                                                <tr>\n                                                    <th>#</th>\n                                                    <th>Account Address</th>\n                                                    <th>Name</th>\n                                                    <th>Age</th>\n                                                    <th>Email</th>\n                                                    <th>City</th>\n                                                    <th>Aadhar Number</th>\n                                                    <th>Pan Number</th>\n                                                    <th>Aadhar Card Document</th>\n                                                    <th>Verification Status</th>\n                                                    <th>Verify Buyer</th>\n                                                    <th>Reject Buyer</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {buyerTable}\n                                            </tbody>\n\n                                        </Table>\n                                    </CardBody>\n                                </Card>\n                            </Col>\n                        </Row>\n                    </div>\n                </LoadingContainer>\n            </DrizzleProvider>\n        );\n\n    }\n}\n\nexport default BuyerInfo;\n"]},"metadata":{},"sourceType":"module"}