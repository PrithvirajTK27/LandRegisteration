{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\prith\\\\Desktop\\\\New folder (5)\\\\starter_kit-master\\\\LandRegisteration\\\\src\\\\views\\\\AddLand.js\";\nimport React, { Component } from 'react';\nimport LandContract from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport ipfs from '../ipfs';\nimport { Button, Card, CardHeader, CardBody, CardFooter, FormGroup, Form, Input, Row, Col } from \"reactstrap\";\nimport { Spinner, FormFile } from 'react-bootstrap';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\n\nvar AddLand =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddLand, _Component);\n\n  function AddLand(props) {\n    var _this;\n\n    _classCallCheck(this, AddLand);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddLand).call(this, props));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var web3, accounts, networkId, deployedNetwork, instance, currentAddress, verified, registered;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //For refreshing page only once\n              if (!window.location.hash) {\n                window.location = window.location + '#loaded';\n                window.location.reload();\n              }\n\n              _context.prev = 1;\n              _context.next = 4;\n              return getWeb3();\n\n            case 4:\n              web3 = _context.sent;\n              _context.next = 7;\n              return web3.eth.getAccounts();\n\n            case 7:\n              accounts = _context.sent;\n              _context.next = 10;\n              return web3.eth.net.getId();\n\n            case 10:\n              networkId = _context.sent;\n              deployedNetwork = LandContract.networks[networkId];\n              instance = new web3.eth.Contract(LandContract.abi, deployedNetwork && deployedNetwork.address);\n\n              _this.setState({\n                LandInstance: instance,\n                web3: web3,\n                account: accounts[0]\n              });\n\n              _context.next = 16;\n              return web3.currentProvider.selectedAddress;\n\n            case 16:\n              currentAddress = _context.sent;\n              console.log(currentAddress);\n\n              _this.setState({\n                LandInstance: instance,\n                web3: web3,\n                account: accounts[0]\n              });\n\n              _context.next = 21;\n              return _this.state.LandInstance.methods.isVerified(currentAddress).call();\n\n            case 21:\n              verified = _context.sent;\n              console.log(verified);\n\n              _this.setState({\n                verified: verified\n              });\n\n              _context.next = 26;\n              return _this.state.LandInstance.methods.isSeller(currentAddress).call();\n\n            case 26:\n              registered = _context.sent;\n              console.log(registered);\n\n              _this.setState({\n                registered: registered\n              });\n\n              _context.next = 35;\n              break;\n\n            case 31:\n              _context.prev = 31;\n              _context.t0 = _context[\"catch\"](1);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context.t0);\n\n            case 35:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 31]]);\n    }));\n    _this.addimage =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ipfs.add(_this.state.buffer).then(function (result) {\n                console.log(\"File hash successful...\");\n                console.log(result);\n                console.log('Hash: ', result.path);\n\n                _this.setState({\n                  ipfsHash: result.path\n                }); // console.log('ifpsHash', this.state.ipfsHash)\n\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.addDoc =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return ipfs.add(_this.state.buffer2).then(function (result) {\n                console.log(\"File hash successful...\");\n                console.log(result);\n                console.log('Hash: ', result.path);\n\n                _this.setState({\n                  ipfsHash: result.path\n                });\n\n                _this.setState({\n                  document: result.path\n                });\n\n                console.log('document:', _this.state.document);\n              });\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    _this.addLand =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this.addimage();\n\n              _this.addDoc(); // alert('After add image')\n\n\n              _context4.next = 4;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 15000);\n              });\n\n            case 4:\n              if (!(_this.state.area == '' || _this.state.city == '' || _this.state.stateLoc == '' || _this.state.price == '' || _this.state.propertyPID == '' || _this.state.surveyNum == '')) {\n                _context4.next = 8;\n                break;\n              }\n\n              alert(\"All the fields are compulsory!\");\n              _context4.next = 15;\n              break;\n\n            case 8:\n              if (!(!Number(_this.state.area) || !Number(_this.state.price))) {\n                _context4.next = 12;\n                break;\n              }\n\n              alert(\"Land area and Price of Land must be a number!\");\n              _context4.next = 15;\n              break;\n\n            case 12:\n              _context4.next = 14;\n              return _this.state.LandInstance.methods.addLand(_this.state.area, _this.state.city, _this.state.stateLoc, _this.state.price, _this.state.propertyPID, _this.state.surveyNum, _this.state.ipfsHash, _this.state.document).send({\n                from: _this.state.account,\n                gas: 2100000\n              }).then(function (response) {\n                _this.props.history.push(\"/Seller/SellerDashboard\");\n              });\n\n            case 14:\n              //Reload\n              window.location.reload(false);\n\n            case 15:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    _this.updateArea = function (event) {\n      return _this.setState({\n        area: event.target.value\n      });\n    };\n\n    _this.updateCity = function (event) {\n      return _this.setState({\n        city: event.target.value\n      });\n    };\n\n    _this.updateState = function (event) {\n      return _this.setState({\n        stateLoc: event.target.value\n      });\n    };\n\n    _this.updatePrice = function (event) {\n      return _this.setState({\n        price: event.target.value\n      });\n    };\n\n    _this.updatePID = function (event) {\n      return _this.setState({\n        propertyPID: event.target.value\n      });\n    };\n\n    _this.updateSurveyNum = function (event) {\n      return _this.setState({\n        surveyNum: event.target.value\n      });\n    };\n\n    _this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      area: '',\n      city: '',\n      stateLoc: '',\n      price: '',\n      lands: null,\n      verficationStatus: false,\n      verified: '',\n      registered: '',\n      buffer: null,\n      ipfsHash: '',\n      propertyPID: '',\n      surveyNum: '',\n      buffer2: null,\n      document: ''\n    };\n    _this.captureFile = _this.captureFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addimage = _this.addimage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.captureDoc = _this.captureDoc.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addDoc = _this.addDoc.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddLand, [{\n    key: \"captureFile\",\n    value: function captureFile(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var file = event.target.files[0];\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = function () {\n        _this2.setState({\n          buffer: Buffer(reader.result)\n        });\n\n        console.log('buffer', _this2.state.buffer);\n      };\n\n      console.log('caoture file...');\n    }\n  }, {\n    key: \"captureDoc\",\n    value: function captureDoc(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      var file2 = event.target.files[0];\n      var reader2 = new window.FileReader();\n      reader2.readAsArrayBuffer(file2);\n\n      reader2.onloadend = function () {\n        _this3.setState({\n          buffer2: Buffer(reader2.result)\n        });\n\n        console.log('buffer2', _this3.state.buffer2);\n      };\n\n      console.log('caoture doc...');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.web3) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, React.createElement(Spinner, {\n          animation: \"border\",\n          variant: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }))));\n      }\n\n      if (!this.state.registered || !this.state.verified) {\n        return React.createElement(\"div\", {\n          className: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, React.createElement(Col, {\n          xs: \"6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: \"card-chart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, React.createElement(CardBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        }, \"You are not verified to view this page\")))))));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"Add Land\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Area (in sqm.)\"), React.createElement(Input, {\n        placeholder: \"Area\",\n        type: \"text\",\n        value: this.state.area,\n        onChange: this.updateArea,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"City\"), React.createElement(Input, {\n        placeholder: \"City\",\n        type: \"text\",\n        value: this.state.city,\n        onChange: this.updateCity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"State\"), React.createElement(Input, {\n        placeholder: \"State\",\n        type: \"text\",\n        value: this.state.stateLoc,\n        onChange: this.updateState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, \"Price\"), React.createElement(Input, {\n        placeholder: \"Price\",\n        type: \"text\",\n        value: this.state.price,\n        onChange: this.updatePrice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"Property PID Number\"), React.createElement(Input, {\n        placeholder: \"Property PID\",\n        type: \"text\",\n        value: this.state.propertyPID,\n        onChange: this.updatePID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Physical Survey Number\"), React.createElement(Input, {\n        placeholder: \"Survey Num\",\n        type: \"text\",\n        value: this.state.surveyNum,\n        onChange: this.updateSurveyNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Insert Land Image\"), React.createElement(FormFile, {\n        id: \"File1\",\n        onChange: this.captureFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \"Insert Adhar card document\"), React.createElement(FormFile, {\n        id: \"File2\",\n        onChange: this.captureDoc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      })))))), React.createElement(CardFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"btn-fill\",\n        color: \"primary\",\n        onClick: this.addLand,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"Add Land\"))))));\n    }\n  }]);\n\n  return AddLand;\n}(Component);\n\nexport default AddLand;","map":{"version":3,"sources":["C:\\Users\\prith\\Desktop\\New folder (5)\\starter_kit-master\\LandRegisteration\\src\\views\\AddLand.js"],"names":["React","Component","LandContract","getWeb3","ipfs","Button","Card","CardHeader","CardBody","CardFooter","FormGroup","Form","Input","Row","Col","Spinner","FormFile","AddLand","props","componentDidMount","window","location","hash","reload","web3","eth","getAccounts","accounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","setState","LandInstance","account","currentProvider","selectedAddress","currentAddress","console","log","state","methods","isVerified","call","verified","isSeller","registered","alert","error","addimage","add","buffer","then","result","path","ipfsHash","addDoc","buffer2","document","addLand","Promise","resolve","setTimeout","area","city","stateLoc","price","propertyPID","surveyNum","Number","send","from","gas","response","history","push","updateArea","event","target","value","updateCity","updateState","updatePrice","updatePID","updateSurveyNum","undefined","lands","verficationStatus","captureFile","bind","captureDoc","preventDefault","file","files","reader","FileReader","readAsArrayBuffer","onloadend","Buffer","file2","reader2"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport LandContract from \"../artifacts/Land.json\";\r\nimport getWeb3 from \"../getWeb3\";\r\nimport ipfs from '../ipfs';\r\n\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardFooter,\r\n  FormGroup,\r\n  Form,\r\n  Input,\r\n  Row,\r\n  Col,\r\n} from \"reactstrap\";\r\nimport { Spinner,   FormFile} from 'react-bootstrap';\r\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nclass AddLand extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      LandInstance: undefined,\r\n      account: null,\r\n      web3: null,\r\n      area: '',\r\n      city: '',\r\n      stateLoc: '',\r\n      price: '',\r\n      lands: null,\r\n      verficationStatus: false,\r\n      verified: '',\r\n      registered: '',\r\n      buffer: null,\r\n      ipfsHash: '',\r\n      propertyPID: '',\r\n      surveyNum: '',\r\n      buffer2: null,\r\n      document: '',\r\n    }\r\n    this.captureFile = this.captureFile.bind(this);\r\n    this.addimage = this.addimage.bind(this);\r\n    this.captureDoc = this.captureDoc.bind(this);\r\n    this.addDoc = this.addDoc.bind(this);\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    //For refreshing page only once\r\n    if (!window.location.hash) {\r\n      window.location = window.location + '#loaded';\r\n      window.location.reload();\r\n    }\r\n\r\n    try {\r\n      //Get network provider and web3 instance\r\n      const web3 = await getWeb3();\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      const networkId = await web3.eth.net.getId();\r\n      const deployedNetwork = LandContract.networks[networkId];\r\n      const instance = new web3.eth.Contract(\r\n        LandContract.abi,\r\n        deployedNetwork && deployedNetwork.address,\r\n      );\r\n\r\n      this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n      const currentAddress = await web3.currentProvider.selectedAddress;\r\n      console.log(currentAddress);\r\n      this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n      var verified = await this.state.LandInstance.methods.isVerified(currentAddress).call();\r\n      console.log(verified);\r\n      this.setState({ verified: verified });\r\n      var registered = await this.state.LandInstance.methods.isSeller(currentAddress).call();\r\n      console.log(registered);\r\n      this.setState({ registered: registered });\r\n\r\n\r\n    } catch (error) {\r\n      // Catch any errors for any of the above operations.\r\n      alert(\r\n        `Failed to load web3, accounts, or contract. Check console for details.`,\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n    addimage = async () => {\r\n       await ipfs.add(this.state.buffer).then((result) => {\r\n            console.log(\"File hash successful...\");\r\n            console.log(result)\r\n            console.log('Hash: ', result.path);\r\n            this.setState({ ipfsHash: result.path });\r\n                // console.log('ifpsHash', this.state.ipfsHash)\r\n            })\r\n        /*\r\n    // alert('In add image')\r\n    await ipfs.files.add(this.state.buffer, (error, result) => {\r\n      if (error) {\r\n        alert(error)\r\n        return\r\n      }\r\n\r\n      alert(result[0].hash)\r\n      this.setState({ ipfsHash: result[0].hash });\r\n      console.log('ipfsHash:', this.state.ipfsHash);\r\n    })*/\r\n  }\r\n  addDoc = async () => {\r\n    // alert('In add image')\r\n      await ipfs.add(this.state.buffer2).then((result) => {\r\n          console.log(\"File hash successful...\");\r\n          console.log(result)\r\n          console.log('Hash: ', result.path);\r\n          this.setState({ ipfsHash: result.path });\r\n          this.setState({ document: result.path });\r\n          console.log('document:', this.state.document);\r\n      })\r\n      /*\r\n    await ipfs.files.add(this.state.buffer2, (error, result) => {\r\n      if (error) {\r\n        alert(error)\r\n        return\r\n      }\r\n\r\n      alert(result[0].hash)\r\n      this.setState({ document: result[0].hash });\r\n      console.log('document:', this.state.document);\r\n    })*/\r\n  }\r\n\r\n  //QmYdztkcPJLmGmwLmM4nyBfVatoBMRDuUjmgBupjmTodAP\r\n  addLand = async () => {\r\n    this.addimage();\r\n    this.addDoc();\r\n    // alert('After add image')\r\n    await new Promise(resolve => setTimeout(resolve, 15000));\r\n    if (this.state.area == '' || this.state.city == '' || this.state.stateLoc == '' || this.state.price == '' || this.state.propertyPID == '' || this.state.surveyNum == '') {\r\n      alert(\"All the fields are compulsory!\");\r\n    } else if ((!Number(this.state.area)) || (!Number(this.state.price))) {\r\n      alert(\"Land area and Price of Land must be a number!\");\r\n    } else {\r\n      await this.state.LandInstance.methods.addLand(\r\n        this.state.area,\r\n        this.state.city,\r\n        this.state.stateLoc,\r\n        this.state.price, \r\n        this.state.propertyPID,\r\n        this.state.surveyNum,\r\n        this.state.ipfsHash, \r\n        this.state.document)\r\n        .send({\r\n          from: this.state.account,\r\n          gas: 2100000\r\n        }).then(response => {\r\n          this.props.history.push(\"/Seller/SellerDashboard\");\r\n        });\r\n\r\n      //Reload\r\n      window.location.reload(false);\r\n    }\r\n  }\r\n  // _city,string  _state, uint landPrice, uint _propertyPID,uint _surveyNum,string memory _ipfsHash\r\n\r\n  updateArea = event => (\r\n    this.setState({ area: event.target.value })\r\n  )\r\n  updateCity = event => (\r\n    this.setState({ city: event.target.value })\r\n  )\r\n  updateState = event => (\r\n    this.setState({ stateLoc: event.target.value })\r\n  )\r\n  updatePrice = event => (\r\n    this.setState({ price: event.target.value })\r\n  )\r\n  updatePID = event => (\r\n    this.setState({ propertyPID: event.target.value })\r\n  )\r\n  updateSurveyNum = event => (\r\n    this.setState({ surveyNum: event.target.value })\r\n  )\r\n  captureFile(event) {\r\n    event.preventDefault()\r\n    const file = event.target.files[0]\r\n    const reader = new window.FileReader()\r\n    reader.readAsArrayBuffer(file)\r\n    reader.onloadend = () => {\r\n      this.setState({ buffer: Buffer(reader.result) })\r\n      console.log('buffer', this.state.buffer)\r\n    }\r\n    console.log('caoture file...')\r\n  }\r\n  captureDoc(event) {\r\n    event.preventDefault()\r\n    const file2 = event.target.files[0]\r\n    const reader2 = new window.FileReader()\r\n    reader2.readAsArrayBuffer(file2)\r\n    reader2.onloadend = () => {\r\n      this.setState({ buffer2: Buffer(reader2.result) })\r\n      console.log('buffer2', this.state.buffer2)\r\n    }\r\n    console.log('caoture doc...')\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.web3) {\r\n      return (\r\n        <div>\r\n          <div>\r\n            <h1>\r\n              <Spinner animation=\"border\" variant=\"primary\" />\r\n            </h1>\r\n          </div>\r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!this.state.registered || !this.state.verified) {\r\n      return (\r\n        <div className=\"content\">\r\n          <div>\r\n            <Row>\r\n              <Col xs=\"6\">\r\n                <Card className=\"card-chart\">\r\n                  <CardBody>\r\n                    <h1>\r\n                      You are not verified to view this page\r\n                                        </h1>\r\n                  </CardBody>\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"content\">\r\n        <Row>\r\n          <Col md=\"8\">\r\n            <Card>\r\n              <CardHeader>\r\n                <h5 className=\"title\">Add Land</h5>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Form>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Area (in sqm.)</label>\r\n                        <Input\r\n                          placeholder=\"Area\"\r\n                          type=\"text\"\r\n                          value={this.state.area}\r\n                          onChange={this.updateArea}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>City</label>\r\n                        <Input\r\n                          placeholder=\"City\"\r\n                          type=\"text\"\r\n                          value={this.state.city}\r\n                          onChange={this.updateCity}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>State</label>\r\n                        <Input\r\n                          placeholder=\"State\"\r\n                          type=\"text\"\r\n                          value={this.state.stateLoc}\r\n                          onChange={this.updateState}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Price</label>\r\n                        <Input\r\n                          placeholder=\"Price\"\r\n                          type=\"text\"\r\n                          value={this.state.price}\r\n                          onChange={this.updatePrice}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Property PID Number</label>\r\n                        <Input\r\n                          placeholder=\"Property PID\"\r\n                          type=\"text\"\r\n                          value={this.state.propertyPID}\r\n                          onChange={this.updatePID}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Physical Survey Number</label>\r\n                        <Input\r\n                          placeholder=\"Survey Num\"\r\n                          type=\"text\"\r\n                          value={this.state.surveyNum}\r\n                          onChange={this.updateSurveyNum}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Insert Land Image</label>\r\n                        <FormFile\r\n                          id=\"File1\"\r\n                          onChange={this.captureFile}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col md=\"12\">\r\n                      <FormGroup>\r\n                        <label>Insert Adhar card document</label>\r\n                        <FormFile\r\n                          id=\"File2\"\r\n                          onChange={this.captureDoc}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                </Form>\r\n              </CardBody>\r\n              <CardFooter>\r\n                <Button className=\"btn-fill\" color=\"primary\" onClick={this.addLand}>\r\n                  Add Land\r\n                </Button>\r\n              </CardFooter>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n\r\n  }\r\n}\r\n\r\nexport default AddLand;\r\n"]},"metadata":{},"sourceType":"module"}